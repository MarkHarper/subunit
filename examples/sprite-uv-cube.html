<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="../bower_components/threejs/build/three.js"></script>
    <script src="vendor/d3.js"></script>
    <script src="vendor/tween.min.js"></script>
    <script src="vendor/OrbitControls.js"></script>
    <script src="../dist/subunit.js"></script>
  </head>
  <body>
    <script>

      var camera, scene, renderer;
      var mesh;


      d3.json('zombies.json', function init(err, data) {

        renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
        camera.position.z = 5;

        scene = new THREE.Scene();

        var light = new THREE.HemisphereLight('#ffffff', '#666666', 1.25)
        scene.add(light);
        // var directionalLight = new THREE.PointLight(0xffffff);
        // directionalLight.position.set(500, 0, 20);
        // scene.add(directionalLight);

        // var directionalLight = new THREE.PointLight(0xffffff);
        // directionalLight.position.set(-500, 0, 20);
        // scene.add(directionalLight);





       // var geometry = new THREE.BoxGeometry( 2, 2, 2 );

        var texture  = THREE.ImageUtils.loadTexture('assets/carpet.jpg');
        texture.anisotropy = renderer.getMaxAnisotropy();

        var material = new THREE.MeshLambertMaterial( { map: texture } );

        // var n = new THREE.MeshPhongMaterial({
        //     map: texture,
        //     // specular: '#a9fcff',
        //     // color: '#00abb1',
        //     // emissive: '#006063',
        //     // shininess: 10
        // });

        var g = new THREE.BufferGeometry()
        g.fromGeometry(new THREE.BoxGeometry( 2, 2, 2 ));
        console.log("buffer geometry", g);

        mesh = new THREE.Mesh(g, material);
        scene.add( mesh );

        //

        window.addEventListener( 'resize', onWindowResize, false );
        animate();

      });

    //   function init() {

    //     renderer = new THREE.WebGLRenderer();
    //     renderer.setSize( window.innerWidth, window.innerHeight );
    //     document.body.appendChild( renderer.domElement );

    //     //

    //     camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
    //     camera.position.z = 400;

    //     scene = new THREE.Scene();

    // var ambientLight = new THREE.AmbientLight(0x222222, 10);
    // scene.add(ambientLight);

    // var directionalLight = new THREE.PointLight(0xffffff);
    // directionalLight.position.set(500, 0, 20);
    // scene.add(directionalLight);

    // var directionalLight = new THREE.PointLight(0xffffff);
    // directionalLight.position.set(-500, 0, 20);
    // scene.add(directionalLight);


    //     var geometry = new THREE.BoxGeometry( 200, 200, 200 );

    //     var texture  = THREE.ImageUtils.loadTexture('images/carpet.jpg');
    //     texture.anisotropy = renderer.getMaxAnisotropy();

    //     var material = new THREE.MeshPhongMaterial({ map: texture });

    //     // var n = new THREE.MeshPhongMaterial({
    //     //     map: texture,
    //     //     // specular: '#a9fcff',
    //     //     // color: '#00abb1',
    //     //     // emissive: '#006063',
    //     //     // shininess: 100


    //     // });

    //     // var g = new THREE.BufferGeometry()
    //     // g.fromGeometry(geometry);
    //     // // g.computeFaceNormals();
    //     // g.computeVertexNormals();
    //     // g.normalizeNormals();


    //     mesh = new THREE.Mesh( geometry, material);
    //     scene.add( mesh );

    //     //

    //     window.addEventListener( 'resize', onWindowResize, false );

    //   }

      function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

      }

      function animate() {

        requestAnimationFrame( animate );

        mesh.rotation.x += 0.012;
        mesh.rotation.y += 0.01;

        renderer.render( scene, camera );

      }

    </script>
  </body>
</html>